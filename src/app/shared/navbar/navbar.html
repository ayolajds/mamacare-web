<nav class="navbar">
  <div class="navbar__container">

    <!-- Marca -->
    <a routerLink="/" class="navbar__brand" aria-label="MamaCare - Inicio">
      <img src="/Logo.jpg" alt="MamaCare" class="navbar__logo-img" />
      <span class="navbar__brand-name">MamaCare</span>
    </a>

    <!-- Bot√≥n Hamburguesa (m√≥vil) -->
    <button class="navbar__burger"
            aria-label="Abrir men√∫"
            aria-controls="mobile-panel"
            [attr.aria-expanded]="isMobileMenuOpen"
            (click)="toggleMobileMenu()">
      <span></span><span></span><span></span>
    </button>

    <!-- Men√∫ Desktop -->
    <ul class="navbar__menu navbar__menu--desktop" role="menubar">
      <li (mouseenter)="closeAllDropdowns()">
        <a routerLink="/quienes-somos" routerLinkActive="is-active" role="menuitem">¬øQui√©nes somos?</a>
      </li>

      <li (mouseenter)="closeAllDropdowns()">
        <a routerLink="/kits" routerLinkActive="is-active" role="menuitem">Kits</a>
      </li>

      <!-- Servicios con dropdown -->
      <li class="navbar__dropdown"
          (mouseenter)="openDropdown()"
          (mouseleave)="closeDropdown()">
        <a href="#"
           class="navbar__link navbar__trigger"
           role="button"
           aria-haspopup="true"
           [attr.aria-expanded]="isDropdownOpen"
           (click)="toggleDropdown($event)">
          Servicios <span class="caret">‚ñæ</span>
        </a>

        <ul class="navbar__dropdown-menu"
            [class.is-open]="isDropdownOpen"
            (mouseenter)="keepDropdownOpen()"
            (mouseleave)="closeDropdown()">
          <li><a routerLink="/servicios/sesiones" routerLinkActive="is-active">Sesiones individuales</a></li>
          <li><a routerLink="/servicios/grupal" routerLinkActive="is-active">Terapia grupal</a></li>
          <li><a routerLink="/servicios/talleres" routerLinkActive="is-active">Talleres educativos</a></li>
        </ul>
      </li>

      <li (mouseenter)="closeAllDropdowns()">
        <a routerLink="/recursos" routerLinkActive="is-active" role="menuitem">Recursos</a>
      </li>

      <li (mouseenter)="closeAllDropdowns()">
        <a routerLink="/historias" routerLinkActive="is-active" role="menuitem">Historias</a>
      </li>

      <li (mouseenter)="closeAllDropdowns()">
        <a routerLink="/contacto" routerLinkActive="is-active" role="menuitem">Contacto</a>
      </li>
    </ul>

    <!-- Acciones Desktop -->
    <div class="navbar__actions navbar__actions--desktop" (mouseenter)="closeAllDropdowns()">
      <a routerLink="/login" class="btn btn--secondary">Iniciar sesi√≥n</a>

      <!-- Selector de idioma (desktop) -->
      <div class="lang" (mouseenter)="openLang()" (mouseleave)="closeLang()">
        <button class="lang__btn" (click)="toggleLang($event)" aria-haspopup="true" [attr.aria-expanded]="isLangOpen">
          <span class="lang__icon" aria-hidden="true">üåê</span>
          <span class="lang__code">{{ currentLang.toUpperCase() }}</span>
          <span class="caret">‚ñæ</span>
        </button>
        <ul class="lang__menu" [class.is-open]="isLangOpen">
          <li><a href="#" (click)="setLanguage($event, 'es')">Espa√±ol</a></li>
          <li><a href="#" (click)="setLanguage($event, 'en')">English</a></li>
        </ul>
      </div>
    </div>

  </div>

  <!-- Panel m√≥vil -->
  <div id="mobile-panel" class="mobile" [class.is-open]="isMobileMenuOpen" (click)="$event.stopPropagation()">
    <div class="mobile__header">
      <span class="mobile__title">Men√∫</span>
      <button class="mobile__close" aria-label="Cerrar men√∫" (click)="closeMobileMenu()">‚úï</button>
    </div>

    <ul class="mobile__menu">
      <li><a routerLink="/quienes-somos" (click)="closeMobileMenu()">¬øQui√©nes somos?</a></li>
      <li><a routerLink="/kits" (click)="closeMobileMenu()">Kits</a></li>

      <!-- Servicios acorde√≥n m√≥vil -->
      <li class="mobile__accordion">
        <button class="mobile__accordion-btn"
                (click)="toggleMobileServices()"
                [attr.aria-expanded]="isMobileServicesOpen">
          Servicios <span class="caret">‚ñæ</span>
        </button>
        <ul class="mobile__submenu" [class.is-open]="isMobileServicesOpen">
          <li><a routerLink="/servicios/sesiones" (click)="closeMobileMenu()">Sesiones individuales</a></li>
          <li><a routerLink="/servicios/grupal" (click)="closeMobileMenu()">Terapia grupal</a></li>
          <li><a routerLink="/servicios/talleres" (click)="closeMobileMenu()">Talleres educativos</a></li>
        </ul>
      </li>

      <li><a routerLink="/recursos" (click)="closeMobileMenu()">Recursos</a></li>
      <li><a routerLink="/historias" (click)="closeMobileMenu()">Historias</a></li>
      <li><a routerLink="/contacto" (click)="closeMobileMenu()">Contacto</a></li>

      <li class="mobile__login">
        <a routerLink="/login" class="btn btn--secondary" (click)="closeMobileMenu()">Iniciar sesi√≥n</a>
      </li>

      <!-- Idioma m√≥vil -->
      <li class="mobile__lang">
        <div class="mobile__lang-row">
          <span class="mobile__lang-label">üåê Idioma</span>
          <span class="mobile__lang-current">{{ currentLang.toUpperCase() }}</span>
        </div>
        <div class="mobile__lang-actions">
          <button (click)="setLanguage($event, 'es')" [class.is-active]="currentLang==='es'">ES</button>
          <button (click)="setLanguage($event, 'en')" [class.is-active]="currentLang==='en'">EN</button>
        </div>
      </li>
    </ul>
  </div>

  <!-- backdrop m√≥vil -->
  <div class="mobile__backdrop" [class.is-open]="isMobileMenuOpen" (click)="closeMobileMenu()"></div>
</nav>
